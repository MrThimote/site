{% extends "forum/base.html" %}
{% load i18n %}
{% load django_bootstrap_breadcrumbs markup rules %}

{% block breadcrumbs %}
  {{ block.super }}
  {% breadcrumb_for "forum:index" %}{% trans "Forums" %}{% endbreadcrumb_for %}
  {% breadcrumb_for "forum:forum" forum.slug forum.pk %}{{ forum.name }}{% endbreadcrumb_for %}
{% endblock breadcrumbs %}

{% block title %}{{ forum.name }}{% endblock %}


{% block content %}

  {% has_perm 'forum.create_thread' request.user forum as can_create_thread %}
  {% if can_create_thread %}
    <div class="pull-right">
      <a href="{% url 'forum:create-thread' forum.slug forum.pk %}" class="btn btn-primary"><i class="fa fa-asterisk"></i> {% trans "Create a new thread" %}</a>
    </div>
  {% endif %}
  <h1>{{ forum.name }}</h1>
  <div class="text-muted forum-description">{{ forum.description|markdown }}</div>


  <form class="form-inline form-user-search">
    <i class="fa fa-fw fa-search"></i>
    <input type="hidden" id="search-user-id" name="user">
    <input id="search-thread-name" name="username" type="text" autocomplete="off" class="form-control" placeholder="{% trans "Search thread" %}">
  </form>


  {% if sticky_threads %}
    <ul class="forum-listing forum-sticky-threads" id="sticky_threads">
      {% for thread in sticky_threads %}
        {% include "forum/stub_forum_thread.html" %}
      {% endfor %}
    </ul>
  {% endif %}

  {% include "stub_pagination.html" %}

  {% if normal_threads %}
    <ul class="forum-listing" id="normal_threads">
      {% for thread in normal_threads %}
        {% include "forum/stub_forum_thread.html" %}
      {% endfor %}
    </ul>
  {% else %}
    <p class="empty-list-item">
      <i class="fa fa-frown-o"></i> {% trans "This forum is empty." %}
    </p>
  {% endif %}

  {% include "stub_pagination.html" %}

{% endblock %}
